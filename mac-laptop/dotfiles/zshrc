export EDITOR=nvim
export LESSHISTFILE=/dev/null
export PYTHONPATH="$HOME/projects/cq"
export TF_PLUGIN_CACHE_DIR="$HOME/.terraform.d/plugin-cache"
export WORDCHARTS="*?_[]~!$^(){}<>"
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"
export HISTSIZE=10000000
export SAVEHIST=10000000
export AWS_PROFILE=DEV

export PATH="$HOME/.local/bin:$HOME/go/bin:$PATH"

alias c=claude
alias ga='git add' gc='git commit -v' gl='git pull' gp='git push' gg='lazygit' gst='git status' gco='git checkout'
alias gr='git restore' grs='git restore --staged' gd='git diff' gds='git diff --staged' glog='git log --all --decorate --oneline --graph'
alias ls='eza' l='eza -lbF --git' ll='eza -la --git' tree='eza --tree --git' ltree='tree -l'    
alias cat='bat'
alias tf='terraform' tfi='tf init' tfp='tf plan' tfa='tf apply' tfps='tfp | grep -E "#"' tfpu="tfp -no-color | grep -E '^\s*[\+~-]' | sort | uniq"
alias vi="nvim" vim="vi"
alias k='kubectl'
alias sk='source ~/.key'
alias y='pbcopy' p='pbpaste'
alias rr='source ~/.zshrc'
alias vv='source ./.venv/bin/activate'
alias dam='aws sts decode-authorization-message --encoded-message "$(pbpaste)" | jq ".DecodedMessage" -r | jq'
alias -g ...='../..'
alias -g ....='../../..'

autoload -Uz compinit; compinit -C  # to apply new completion, run `compinit`

. pack djui/alias-tips alias-tips.plugin.zsh:alias-tips.py
. pack ohmyzsh/ohmyzsh lib/history.zsh
. pack ohmyzsh/ohmyzsh plugins/dirhistory/dirhistory.plugin.zsh
# fzf key-bindings should be after omz
. pack ohmyzsh/ohmyzsh lib/key-bindings.zsh
. pack junegunn/fzf shell/key-bindings.zsh

setopt autopushd
setopt extended_glob
setopt interactive_comments
setopt share_history
setopt append_history
setopt inc_append_history

zstyle ':completion:*:*:docker:*' option-stacking yes
zstyle ':completion:*:*:docker-*:*' option-stacking yes
zstyle ':completion:*:*:git:*' script /Library/Developer/CommandLineTools/usr/share/git-core/git-completion.zsh
source <(helm completion zsh)
steampipe completion zsh > "${fpath[1]}/_steampipe" && compinit

tmp() { 
    TMP=~/tmp/$(date +%F)
    if [ "$#" -gt 0 ]; then
        TMP="${TMP}-$(echo "$@" | tr ' ' '-')"
    fi
    mkdir -p "$TMP"
    cd "$TMP"
}
video_to_gif() { ffmpeg -i $1 -vf "fps=$2" output.gif && gifsicle -O3 output.gif -o output.gif }
cc() {
    local selected_dir=$(zoxide query -i)
    if [[ -n "$selected_dir" ]]; then
        cd "$selected_dir" && claude
    fi
}

fpath+=(/opt/homebrew/share/zsh/site-functions)
eval "$(zoxide init zsh)"
eval "$(starship init zsh)"
